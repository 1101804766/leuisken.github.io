---
layout: post
category: "frontend"
tag: [前端]
title: 初步探究CSS 3Dtransform效果
---
<p>本文参考张大神<a href="http://www.zhangxinxu.com/wordpress/?p=2592">好吧，CSS3 3D transform变换，不过如此！</a>一文，相当于是对前辈文章的个人总结。</p>
<p>一、rotateX() / rotateY() / rotateZ()</p>
<p>以浏览器水平方向为x轴，垂直方向为y轴，我们面朝的方向为z轴，好了，这就是rotate变换依赖的坐标系。坐标系具体的正方向我没有深究，不过可以实际发现，当rotateX()中的值在0-45deg之间时，平面上半部分向屏幕里面转，下半部分自然是屏幕外；当rotateY()在0-45deg之间时，平面左半部分朝外，右半部份朝里；rotateZ()则是顺时针转；有这个结论的话，基本上各种转法都可以确定了。</p>
<p>当我们实际设置这些值的时候，比如让正方形div做rotateX(45deg)变换，会发现并没有立体效果，只是图形变扁了而已。这是因为现在的屏幕还是二次元的东西，我们看到的扁div是三维图形的投影，而让他变成三次元，还有关键的属性：perspective。</p>
<p>二、perspective</p>
<p>perspective一般来说是设置给做了3D变换的元素的父元素的，其值默认为像素，也可以是其他单位，意义是透视点距离屏幕的距离。说白了就是，你面前有一个手机（平面），朝后倒了45度角（rotateX(45deg)），现在开始你往后一步一步的退后（相当于perspective属性值一像素一像素的叠加），你眼中这个手机所呈现的视图肯定是在发生着改变的。</p>
<p>也许理科生更喜欢这种表述，perspective的值，就是视点在z轴上的坐标。</p>
<p>三、translateZ</p>
<p>不光你可以后退，平面也可以自由地前进后退，那就是translateZ属性（也就是平面在z轴上的左边），当只有一个平面的时候这个属性并没有什么意义，毕竟你退一点他进一点显示上没什么不同。不过，当有好几个平面的时候，就可以开心的玩耍这个属性，构造你想要的效果。</p>
<p>四、结合实例，理解属性</p>
<p>接下来要说说这部分的其他属性，第一个demo：<a href="/demo/2015-07-10/perspective-demo.html">点击这里</a>。现在F12审查元素，可以看到父div有7个子div，均向Y轴旋转90deg。好大概就是这么一个布局，现在你看到的景象是不是很奇怪，为什么两边是诡异颜色的三角形而又指着中间的一个点？</p>
<p>现在想象我们在这个div的中间，我们左右两边各有3堵墙（3个div），而我们就在中间这堵墙的中心，由于墙是二维平面没有厚度，所以我们看不到，好，一步一步往后走（增大#div1的perspective值，大概到400-500px左右），浏览器中div呈现的变化，不就是我们一步步移出来的时候看到的景色吗？现在是不更加是理解perspective属性了？</p>
<p>回到perspective:1px，刚刚我们一直在讨论视点，其实就是我们站的位置（或者说观察点），而这个位置，在perspective:1px时，大概就是左右两个三角形指向的位置，现在看perspective下面的perspective-origin属性，这个属性就指的是我们站的点的具体位置，默认就是50% 50%，我们先改变左边的值，改成0px 50%，然后让这个0px一点点增加，可以看到指向的点在进行运动，浏览器呈现的div元素也随之变化，这就是我们视点的移动。</p>
<p>中间这个div，因为设置了rotateY(90deg)，在默认的视点下，和我们是垂直的，也就是不可见的，现在移动视点，也就可以看到他的样子与颜色了。</p>
<p>中间的div还有一个属性backface-visibility:hidden，这个属性标明元素的背面是否可见。现在你调整一下.div2的rotateY()的角度，你可以看到拥有这个属性的中间的div与其他的div之间的不同（元素背面的可见与否）。</p>
<p>下面说说另外一个demo：<a href="/demo/2015-07-10/preserve-3d.html">点击这里</a>。这个主要说的是transform-style:preserve-3d这个属性，他的默认值是flat。在这个demo里，拥有perspective属性的为黑框div，中间的两个div是父子关系，他们本因重合，但是一个向Y轴转了45deg，一个向X轴转了45deg，就构成了这样的景象，这个相交的两个平面应该很好理解。现在，我们把transform-style的值修改或注释，发现元素产生了奇怪的变化，原来的相交关系消失了。</p>
<p>怎么解释这种呈现我也不能理解，在W3School上说的是：是否保留子元素的3D位置，不过这个定义我还是不能理解啊。。。目前就只能知道，还是preserve-3d的表现更好理解，实际处理的时候就用preserve-3d就好了。</p>
<p>以上就是我本人对CSS3在3D变换部分的个人理解，还请大家多多指教。</p>